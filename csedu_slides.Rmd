---
title: "Effects of Early Warning Emails on Student Performance <br>"
subtitle: ""
author: ""
date: "21-23 April, 2023"
location: "Prague"
output:
  xaringan::moon_reader:
    css: ["default", "assets/ude_fonts.css", "assets/ude.css"]
    self_contained: true # if true, fonts will be stored locally
    seal: false # show a title slide with YAML information
    includes:
      in_header: "assets/mathjax-equation-numbers.html"
    nature:
      beforeInit: ["assets/remark-zoom.js"]
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      ratio: '16:9' #alternatives '16:9' or '4:3' or others e.g. 13:9
      navigation:
        scroll: TRUE #disable slide transitions by scrolling
---
class: title-slide  
```{r, load_refs, include = FALSE, echo=FALSE, cache=FALSE}
library(RefManageR)
BibOptions(check.entries = FALSE, 
           bib.style = "authoryear", 
           cite.style = 'authoryear', 
           style = "markdown",
           hyperlink = FALSE, 
           dashed = FALSE)
myBib <- ReadBib("assets/example.bib", check = FALSE)

# packages
source(here::here('assets/packages.R'))

# infinity reader
# options(servr.interval = 0.5)
# xaringan::inf_mr()
```

```{r xaringanExtra_progress-bar, echo = FALSE}
xaringanExtra::use_progress_bar(color = "#004c93", location = "bottom")
```

```{r xaringanExtra-clipboard_2, echo=FALSE}
# copy button styles mainly in ude.css 
# https://github.com/gadenbuie/xaringanExtra
htmltools::tagList(
  xaringanExtra::use_clipboard(
    button_text = "<i class=\"fa fa-clipboard\"></i>",
    success_text = "<i class=\"fa fa-check\" style=\"color: #00ff00\"></i>",
    error_text = "<i class=\"fa fa-times-circle\" style=\"color: #F94144\"></i>"
  ),
  rmarkdown::html_dependency_font_awesome()
)

desktop <- icons::icon_style(icons::fontawesome$solid$desktop, fill = "#004c93")
exclamation <- icons::icon_style(icons::fontawesome$solid$exclamation, fill = "#004c93")
```
<br>
<br>
# `r rmarkdown::metadata$title`


.padding_left.pull-down.white[
.font120[**_J. Klenke_**], T. Massing, N. Reckmann, J. Langerbein, B. Otto, M. Goedicke, C. Hanck
<br>
<br>
<br>
$15^{TH}$ International Conference on Computer Supported Education

Prague, `r rmarkdown::metadata$date`
]

---
# Course Description 

- Analyzed Course: _Inferential Statistics_ at the University of Duisburg-Essen of the summer semester 2019
- Compulsory course for several business and economics programs
  - Weekly 2-hour lecture 
  - Weekly 2-hour exercise
  - [Kahoot!](https://kahoot.com/) games were used to interact with students during classes
  - Homework and 5 online tests were offered on the e-assessment platform [JACK](https://s3.paluno.uni-due.de/en/forschung/spalte1/e-learning-und-e-assessment)
- Information from __802__ individuals were collected from Moodle  
  - __337__ students took an exam at the end of the semester

---
# Research Idea Theorie 
- Predicting students success and/or final grad is relatively early possible 


---
# Data and Warning Mail Decision
- We used two data sources 
  - The first three online tests results  
  - The commutative homework points in JACK
- Logit model was used to predict students probability to past the final exam soley based on the results in the frist three online tests
  - Model was trained with the latest data obtained from the same course given two years earlier
  - We hold the lecture only every other year
- If the predicted probability was less than 0.4 the student was indicated with a warning
- However, as the online tests were not mandatory we also considered students' general activity in JACK and modified the decision on whether a mail was sent

---
# Course Timeline Main Events

<br> 
<br>

```{r, out.width="80%", fig.align="center", fig.cap=c("Timeline for the key events in the 2019 summer term course Inferential Statistics (treatment cohort). The shaded area indicates the period after treatment. There were 57 days between the warning email and the first opportunity to take the exam and 113 days between the warning email and the second opportunity."), echo=FALSE}
knitr::include_graphics(here::here('plots/timeline_plot.png'))
```

---
# Regression Discontinuity Design (RDD) 

- The treatment is __not__ randomly assigned and therefore more commonly used methods like OLS are not suitable
  - In our design the treatment is main a function of the predicted probability to pass the final exam   
- Consider the following _sharp_ RDD representation: 

$$Y_i = \beta_0 + \alpha T_i + \beta W_i + u_i$$
.padding_left.padding_left.font70[
<ul>
  <li> \(W_i\) denotes the predicted probability to pass the final exam</li>
  <li> \(T_i\) indicates if a student received a mail</li>
  <ul style="list-style-type: '&#8227;  ';"  >
    <li>\(T_i = 1[W_i \leq c]\) , with \(c = 0.4\) </li>
  </ul>
  <li>\(\alpha\) denotes the treatment effect</li>
  <li>\(u_i\) denotes the error term</li>
</ul>
]

- RDD compares the individuals around the cutoff to estimate an effect
  - __Main Assumption:__ Indivduals around the cutoff are similar in all aspects except the treatment


--

`r exclamation` $\;$  This design is not suitable for our analysis as our groups are not perfectly separated  

---
# Fuzzy RDD

- __Fuzzy__ RDD allows to analyse a treatment in a setting where the two groups are not perfectly separated
  - Only the likelihood of receiving the treatment needs to _change_
- The effect is estimated through an instrumental variable estimation where in the first stage the $\widehat{T}_i$ are estimated which then are inserted in the second stage

- First Stage: 
$$T_i = \gamma_0 +\gamma_i Z_i + \gamma_2  W_i + \nu_i \qquad \quad$$

- Second Stage: 
$$Y_i  = \beta_0 + \alpha \widehat{T}_i + \delta_1 W_i + \beta X_i + u_i$$

---
# RDD Graphic 

exmaple plot 

---
# Model Assumptions

- The running variable $W$ (predicted probability to pass the exam) needs to be continuous around the cutoff, otherwise students could manipulate the treatment

.pull-left-2[
```{r, out.width="80%", fig.align="center", fig.cap=c("Graphical illustration of the McCrary sorting test."), echo=FALSE}
knitr::include_graphics(here::here('plots/test_cont_label.png'))
```
]

--

.pull-right-1[
<br>

- There is no jump in the density around the cutoff point of $0.4$. 
- $p$-value: $0.509$
- The incentive to manipulate the treatment is quiet low. 

]

--

.pull-down[
- Also standard IV estimation assumptions must hold, which they do by construction of RDD
]

---
# Results

```{r, out.width="80%", fig.align="center", fig.cap=c("Graphical illustration of the RDD Model."), echo=FALSE}
knitr::include_graphics(here::here('plots/model_plot_label.png'))
```


<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
  overflow:hidden;padding:10px 5px;word-break:normal;}
.tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
  font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}
.tg .tg-c3ow{border-color:inherit;text-align:center;vertical-align:top}
.tg .tg-0pky{border-color:inherit;text-align:left;vertical-align:top}
</style>
<table class="tg">
<thead>
  <tr>
    <th class="tg-0pky"></th>
    <th class="tg-c3ow">Model 1</th>
    <th class="tg-c3ow">Model 2</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-0pky">LATE</td>
    <td class="tg-c3ow">0.193<br>(4.889)</td>
    <td class="tg-c3ow">0.146<br>(4.852)</td>
  </tr>
  <tr>
    <td class="tg-0pky">Bandwith</td>
    <td class="tg-c3ow">0.255</td>
    <td class="tg-c3ow">0.255</td>
  </tr>
  <tr>
    <td class="tg-0pky">F-statistics</td>
    <td class="tg-c3ow">0.257</td>
    <td class="tg-c3ow">0.257</td>
  </tr>
  <tr>
    <td class="tg-0pky">N</td>
    <td class="tg-c3ow">126</td>
    <td class="tg-c3ow">126</td>
  </tr>
</tbody>
</table>

---

```{r moidel_table, echo = FALSE}
 #### freq LASSO ####

mods <- readxl::read_excel(here::here('data/model.xlsx'))

knitr::kable(mods, caption = '\\label{tab:sum_lm} Summary of the linear model', format.args = list(decimal.mark = '.', big.mark = " "),   booktabs = TRUE, linesep = "")%>%
  kable_styling(latex_options = c("striped", "hold_position"))
```

---
# Sources 

- McCrary, J. (2008). Manipulation of the running variable in the regression discontinuity design: A density test. Journal of Econometrics, 142(2):698â€“714.